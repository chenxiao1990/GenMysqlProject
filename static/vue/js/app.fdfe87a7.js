(function(e){function t(t){for(var n,s,o=t[0],r=t[1],c=t[2],d=0,b=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&b.push(i[s][0]),i[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);u&&u(t);while(b.length)b.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],n=!0,o=1;o<a.length;o++){var r=a[o];0!==i[r]&&(n=!1)}n&&(l.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},l=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vue/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=r;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("64a9"),i=a.n(n);i.a},"2ece":function(e,t,a){"use strict";var n=a("b5e4"),i=a.n(n);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},l=[],s=(a("034f"),a("2877")),o={},r=Object(s["a"])(o,i,l,!1,null,null,null),c=r.exports,u=a("8c4f"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticStyle:{margin:"20px"}},[a("span",[e._v("版本:"+e._s(e.version))])]),a("el-form",{staticStyle:{width:"400px",margin:"auto"},attrs:{"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"数据库地址"}},[a("el-input",{attrs:{placeholder:"192.168.0.24:3306"},model:{value:e.dbIPPort,callback:function(t){e.dbIPPort=t},expression:"dbIPPort"}})],1),a("el-form-item",{attrs:{label:"数据库名"}},[a("el-input",{attrs:{placeholder:"xzy2"},model:{value:e.dbName,callback:function(t){e.dbName=t},expression:"dbName"}})],1),a("el-form-item",{attrs:{label:"数据库用户"}},[a("el-input",{attrs:{placeholder:"root"},model:{value:e.dbUser,callback:function(t){e.dbUser=t},expression:"dbUser"}})],1),a("el-form-item",{attrs:{label:"数据库密码"}},[a("el-input",{attrs:{placeholder:"12345678"},model:{value:e.dbPass,callback:function(t){e.dbPass=t},expression:"dbPass"}})],1)],1),a("div",{staticStyle:{margin:"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.genselectcode}},[e._v("查询代码生成")])],1),a("div",{staticStyle:{margin:"20px"}},[a("el-button",{attrs:{type:"success"},on:{click:e.genproject}},[e._v("生成工程")])],1),a("el-dialog",{attrs:{title:"自动生成工程",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._v("\n    新工程名"),a("el-input",{attrs:{placeholder:"Mypro"},model:{value:e.outProjectName,callback:function(t){e.outProjectName=t},expression:"outProjectName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.genprojecting}},[e._v("确 定")])],1)],1)],1)},b=[],f={name:"home",components:{},data:function(){return{version:"",dbIPPort:"",dbName:"",dbUser:"",dbPass:"",outProjectName:"",dialogVisible:!1}},created:function(){var e=this;this.$axios.get("/cx/version").then((function(t){console.log(t.data),e.version=t.data.data})),this.$axios.get("/cx/dbinfo").then((function(t){console.log(t.data),e.dbIPPort=t.data.data.dbIPPort,e.dbName=t.data.data.dbName,e.dbUser=t.data.data.dbUser,e.dbPass=t.data.data.dbPass,e.outProjectName=t.data.data.outProjectName}))},methods:{genproject:function(){this.dialogVisible=!0},genprojecting:function(){var e=this;this.dialogVisible=!1,this.$axios.post("/cx/genproject",{dbIPPort:this.dbIPPort,dbName:this.dbName,dbUser:this.dbUser,dbPass:this.dbPass,outProjectName:this.outProjectName}).then((function(t){1==t.data.code?e.$message.success(t.data.message):e.$message.error(t.data.message)}))},genselectcode:function(){var e=this;this.$axios.post("/cx/setdbinfo",{dbIPPort:this.dbIPPort,dbName:this.dbName,dbUser:this.dbUser,dbPass:this.dbPass}).then((function(t){1==t.data.code?e.$router.push("/genselectcode"):e.$message.error(t.data.message)}))}}},p=f,h=Object(s["a"])(p,d,b,!1,null,null,null),g=h.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"lefttable"},[e._m(0),e._l(e.tables,(function(t,n){return a("div",{key:n,staticClass:"tablecell"},[a("div",{staticStyle:{width:"calc(100% - 40px)",float:"left"}},[e._v("\n        "+e._s(t.TableName)+"\n      ")]),a("div",{staticStyle:{width:"38px",float:"right"}},[a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-check",circle:""},on:{click:function(a){return e.selecttable(t)}}})],1),a("div",{staticStyle:{clear:"both"}})])}))],2),a("div",{staticClass:"center"},e._l(e.curTables,(function(t,n){return a("div",{key:t.TableName,staticClass:"onetable"},[a("div",{staticStyle:{"border-bottom":"1px solid #ddd"}},[a("span",{staticStyle:{"line-height":"30px"}},[e._v(" "+e._s(t.TableName)+" ")])]),a("div",{staticStyle:{height:"calc(100% - 60px)",overflow:"auto","text-align":"left","padding-left":"5px"}},e._l(t.Fields,(function(n){return a("div",{key:n.Name},[a("div",{staticStyle:{"line-height":"25px"}},[a("el-checkbox",{on:{change:function(t){return e.checkchange()}},model:{value:n.checked,callback:function(t){e.$set(n,"checked",t)},expression:"f.checked"}},[e._v(e._s(n.Name)+"     "+e._s(n.Type))]),null!=e.guanlian[t.TableName]&&e.guanlian[t.TableName].guanlianField==n.Name?a("div",{staticStyle:{color:"#f00"}},[e._v("\n             "+e._s(n.Name)+" 关联 "+e._s(e.guanlian[t.TableName].guanlian2Table)+"."+e._s(e.guanlian[t.TableName].guanlian2Field)+"\n            ")]):e._e()],1)])})),0),a("div",{staticStyle:{height:"30px"}},[a("el-button",{attrs:{type:"danger",size:"mini",circle:""},on:{click:function(t){return e.setzhu(n)}}},[e._v(e._s(0==n?"主":"副"))]),0!=n?a("el-button",{attrs:{type:"danger",size:"mini",circle:""},on:{click:function(t){return e.setlianjie(n)}}},[e._v("联")]):e._e(),0!=n?a("el-button",{attrs:{type:"danger",size:"mini",circle:""},on:{click:function(t){return e.setmore(n)}}},[e._v(e._s(0==t.ismore?"一":"多"))]):e._e(),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},on:{click:function(a){return e.removetable(t)}}})],1)])})),0),a("div",{staticClass:"right"},[a("el-button",{staticClass:"gongnengbtn",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.clear()}}},[e._v("清空")]),a("el-button",{staticClass:"gongnengbtn",attrs:{type:"primary",size:"mini"}},[e._v("查询代码")])],1),a("div",{staticStyle:{clear:"both"}}),e.dialogVisible?a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"关联表",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._v("\n    本表:"+e._s(e.guanlianTable)+"\n    "),a("div",[e._v("\n      本表字段:"),a("el-select",{attrs:{placeholder:"请选择本表字段"},model:{value:e.guanlianField,callback:function(t){e.guanlianField=t},expression:"guanlianField"}},e._l(e.maptables[e.guanlianTable].Fields,(function(e){return a("el-option",{key:e.Name,attrs:{label:e.Name,value:e.Name}})})),1)],1),a("div",[e._v("\n      关联表:"),a("el-select",{attrs:{placeholder:"请选择本表字段"},model:{value:e.guanlian2Table,callback:function(t){e.guanlian2Table=t},expression:"guanlian2Table"}},e._l(e.canselecttables,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),""!=e.guanlian2Table?a("div",[e._v("\n      关联字段:"),a("el-select",{attrs:{placeholder:"请选择关联表字段"},model:{value:e.guanlian2Field,callback:function(t){e.guanlian2Field=t},expression:"guanlian2Field"}},e._l(e.maptables[e.guanlian2Table].Fields,(function(e){return a("el-option",{key:e.Name,attrs:{label:e.Name,value:e.Name}})})),1)],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.guanliansave}},[e._v("添加关联")])],1)]):e._e()],1)},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"border-bottom":"1px solid #aaa","background-color":"#409EFF",color:"#FFF","line-height":"30px"}},[a("span",[e._v("数据库表")])])}],y=(a("ac6a"),{name:"genselectcode",components:{},computed:{canselecttables:function(){var e=this,t=[];return this.curTables.forEach((function(a){a.TableName!=e.guanlianTable&&t.push(a.TableName)})),t}},data:function(){return{tables:[],maptables:{},curTables:[],guanlianField:"",guanlianTable:"",guanlian2Field:"",guanlian2Table:"",dialogVisible:!1,guanlian:{}}},created:function(){this.inittables()},methods:{inittables:function(){var e=this;this.$axios.get("/cx/tables").then((function(t){0==t.data.code?e.$message.error(t.data.message):(e.tables=t.data.data,e.tables.forEach((function(t){e.maptables[t.TableName]=t})),console.log("tables:",e.tables))}))},selecttable:function(e){var t=!1;this.curTables.forEach((function(a){a.TableName==e.TableName&&(t=!0)})),t||(e.checkinds=[],e.ismore=0,e.Fields.forEach((function(e){e.checked=0})),this.curTables.push(e))},removetable:function(e){var t=-1;this.curTables.forEach((function(a,n){a.TableName==e.TableName&&(t=n)})),t>-1&&(this.curTables.splice(t,1),delete this.guanlian[e.TableName])},setzhu:function(e){var t=this.curTables[e];this.curTables.splice(e,1),this.curTables.unshift(t)},setmore:function(e){this.curTables[e].ismore=0==this.curTables[e].ismore?1:0,this.curTables=JSON.parse(JSON.stringify(this.curTables))},clear:function(){this.curTables=[],this.guanlian={}},checkchange:function(){this.curTables=JSON.parse(JSON.stringify(this.curTables))},setlianjie:function(e){this.guanlianTable=this.curTables[e].TableName,console.log("当前操作关联表:",this.guanlianTable,this.maptables[this.guanlianTable]),this.dialogVisible=!0},guanliansave:function(){this.guanlian[this.guanlianTable]={guanlianField:this.guanlianField,guanlian2Field:this.guanlian2Field,guanlian2Table:this.guanlian2Table},this.dialogVisible=!1,this.guanlianField="",this.guanlianTable="",this.guanlian2Field="",this.guanlian2Table=""}}}),_=y,T=(a("2ece"),Object(s["a"])(_,m,v,!1,null,null,null)),x=T.exports;n["default"].use(u["a"]);var N=new u["a"]({routes:[{path:"/",name:"home",component:g},{path:"/genselectcode",name:"genselectcode",component:x}]}),P=a("5c96"),k=a.n(P),j=(a("0fae"),a("bc3a")),F=a.n(j);n["default"].config.productionTip=!1,n["default"].use(k.a),n["default"].prototype.$axios=F.a,new n["default"]({router:N,render:function(e){return e(c)}}).$mount("#app")},"64a9":function(e,t,a){},b5e4:function(e,t,a){}});